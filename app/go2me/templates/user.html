{% extends "pages.html" %}
{% load humanize %}
{% load custom %}
{% block subTitle %}{{usernamePage}}'s activity{% endblock %}
{% block pagebody %}
<div class="page">
<div class="head">
	<a target="_top" href="/" title="{{site_name}} Home | Popular Pages"><img class="logo" src="/images/logo.png"></a>
	<a href="/user/{{usernamePage}}/picture_full"><img class="profile" src="/user/{{usernamePage}}/picture_med"></a>
	<h1 style="padding-top: 40px;">
		{% if profilePage.urlHome %}
			<a href="{{profilePage.urlHome|escape}}">{{usernamePage}}</a>'s activity
		{% else %}
			{{usernamePage}}'s activity
		{% endif %}
	</h1>
	<div style='clear:both;'></div>
</div>

{% if profilePage.sAbout %}
	<div class="about">
	About <b>{% if profilePage.sFullname %}{{profilePage.sFullname|escape}}
			 {% else %}{{profilePage.username}}{% endif %}</b>:
	{{profilePage.sAbout|escape|urlize}}
</div>
{% else %}{% if profilePage.sFullname %}
	<div style="text-align:center;" class="about">
	<b>{{profilePage.sFullname|escape}}</b>
	</div>
{% endif %}{% endif %}

<table class="scores">
<tr><th></th><th>Title</th><th>Shared</th><th>Viewed</th><th>Comments</th><th>Created</th><th>Scores</th></tr>
{% for comment in comments %}
	<tr>
		<td style="width:18px;"><span style="display:none;" class="Snap_Shot_URL">{{comment.map.url|escape}}</span></td>
		<td class="title"><div>
			<a href="/{{comment.map.GetId}}" title="{{comment.map.url|escape}}">{{comment.map.title|escape}}</a>
		{% if comment.comment or comment.tags %}<div class="comments"><p>
			{% ifequal comment.comment "__share" %}<i>Shared</i>{% else %}{{comment.comment|escape|urlize}}{% endifequal %}
			{% if comment.tags %}
	    		[{% for tag in comment.TagList %}<a target="_top" href="/tag/{{tag}}">{{tag|escape}}</a>{% if not forloop.last %}, {% endif %}{% endfor %}]
	    	{% endif %}
	    	- <i>{{ comment.dateCreated|Age }}</i>
	    	{% if comment.AllowDelete %}
    			<img class="x" onclick="Go2.DeleteComment('{{comment.DelKey}}');" src="/images/x.png"/>
    		{% endif %}
	    	</p></div>
	    {% endif %}
		</div></td>
		<td class="num">{{comment.map.shareCount|intcomma}}</td>
		<td class="num">{{comment.map.viewCount|intcomma}}</td>
		<td class="num">{{comment.map.CommentCount|intcomma}}</td>
		<td class="age">
			{% if comment.map.Creator %}
				{% ifnotequal usernamePage comment.map.Creator %}
				<a href="/user/{{comment.map.Creator}}">
					<img class="inline" src="/user/{{comment.map.Creator}}/picture_thumb"></a>
				{% endifnotequal %}
				<a href="/user/{{comment.map.Creator}}">{{comment.map.Creator}}</a> -
			{% endif %}
			{{comment.map.dateCreated|Age}}
		</td>
		{% with comment.map.ScoresNamed.day as scoreDay %}
		<td class="bar"><div class="bar" bar_value="{{scoreDay|mult:24|floatformat:1}}"
			title="{{scoreDay|mult:24|floatformat:1}} points per day">&nbsp;</div></td>
		{% endwith %}
	</tr>
{% endfor %}
</table>
{% endblock %}
